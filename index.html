<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»‘æš—é­”çªŸ - å®Œæ•´éŠæˆ²</title>
    <meta name="description" content="é»‘æš—é­”çªŸï¼šä¸€å€‹åŸºæ–¼HTML5çš„å›åˆåˆ¶æˆ°é¬¥éŠæˆ²">
    <meta name="author" content="é»‘æš—é­”çªŸé–‹ç™¼åœ˜éšŠ">
    <meta name="keywords" content="é»‘æš—é­”çªŸ, å›åˆåˆ¶, RPG, éŠæˆ², HTML5éŠæˆ²">
    
    <!-- CSS æ¨£å¼æ–‡ä»¶ -->
<link rel="stylesheet" href="./css/style.css">
<link rel="stylesheet" href="./css/components/panels.css">
<link rel="stylesheet" href="./css/components/cards.css">
<link rel="stylesheet" href="./css/components/talents.css">
<link rel="stylesheet" href="./css/components/settings.css">
    
    <!-- é åŠ è¼‰å­—é«” -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        /* é è¼‰å…¥æ¨£å¼é¿å…FOUT */
        body {
            font-family: 'Microsoft JhengHei', 'å¾®è»Ÿæ­£é»‘é«”', Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        }
        
        /* è¼‰å…¥å‹•ç•« */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #e94560;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        .loading-text {
            color: white;
            font-size: 18px;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .loading-subtext {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            text-align: center;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* éŠæˆ²ç‰ˆæœ¬æ¨™è­˜ */
        .version-badge {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.5);
            color: rgba(255, 255, 255, 0.6);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- è¼‰å…¥ç•«é¢ -->
    <div id="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">é»‘æš—é­”çªŸ è¼‰å…¥ä¸­...</div>
        <div class="loading-subtext">æº–å‚™é€²å…¥ç¥ç§˜çš„æ´ç©´å†’éšª</div>
    </div>

    <!-- éŠæˆ²ä¸»å®¹å™¨ -->
    <div id="game-container" style="display: none;">
        <!-- å·¦å´å¤©è³¦é¢æ¿ -->
        <div id="talent-panel" class="panel">
            <div class="panel-header">å¤©è³¦æŠ€èƒ½</div>
            <div id="talents-grid"></div>
        </div>

        <!-- ä¸­å¤®éŠæˆ²å€åŸŸ -->
        <div id="main-game-area">
            <!-- æ•µæˆ‘é¡¯ç¤ºå€ -->
            <div id="battle-field">
                <div id="enemy-container" class="battle-entity">
                    <div class="health-bar">
                        <div class="health-fill"></div>
                        <div class="health-text">100/100</div>
                    </div>
                    <div class="entity-display enemy">æ•µ</div>
                    <div class="entity-level">001</div>
                    <div class="enemy-attributes">ç„¡å±¬æ€§åŠ æˆ</div>
                </div>
                
                <div id="player-container" class="battle-entity">
                    <div class="health-bar">
                        <div class="health-fill"></div>
                        <div class="health-text">100/100</div>
                    </div>
                    <div class="entity-display player">æˆ‘</div>
                    <div class="entity-stats">
                        æ”»:0 é˜²:0 å‘½:0% æš´:0%
                    </div>
                </div>
            </div>

            <!-- ç°è‰²åŠŸèƒ½å€ -->
            <div id="action-panel" class="panel">
                <button id="start-battle-btn" class="action-btn">é–‹å§‹æˆ°é¬¥</button>
                <div id="enemy-next-attack">æ•µäººä¸‹æ¬¡æ”»æ“Šï¼šæœªçŸ¥</div>
                
                <div id="battle-controls">
                    <button id="save-game-btn" class="secondary-btn">å„²å­˜éŠæˆ²</button>
                    <button id="load-game-btn" class="secondary-btn">è¼‰å…¥éŠæˆ²</button>
                    <button id="settings-btn" class="secondary-btn">è¨­å®š</button>
                    <button id="help-btn" class="secondary-btn">èªªæ˜</button>
                </div>
                
                <div id="battle-log"></div>
            </div>
        </div>

        <!-- å³ä¸‹å¡ç‰Œå€ -->
        <div id="card-hand" class="panel">
            <div class="card" data-type="light">
                <div class="card-content">è¼•</div>
                <div class="card-stats">16å‚·å®³ | 72%å‘½ä¸­</div>
            </div>
            <div class="card" data-type="medium">
                <div class="card-content">ä¸­</div>
                <div class="card-stats">24å‚·å®³ | 64%å‘½ä¸­</div>
            </div>
            <div class="card" data-type="heavy">
                <div class="card-content">é‡</div>
                <div class="card-stats">49å‚·å®³ | 57%å‘½ä¸­</div>
            </div>
        </div>

        <!-- å³ä¸Šæˆ°é¬¥ä¿¡æ¯å€ -->
        <div id="combat-info" class="panel">
            <div class="panel-header">
                <span>æˆ°é¬¥ä¿¡æ¯</span>
                <span id="game-version">v1.4.0</span>
            </div>
            <div id="combat-messages"></div>
        </div>
    </div>

    <!-- éŠæˆ²æ§åˆ¶é¢æ¿ -->
    <div id="game-controls" class="panel" style="display: none;">
        <div class="panel-header">éŠæˆ²æ§åˆ¶</div>
        <div class="control-group">
            <button id="toggle-debug-btn" class="control-btn">åˆ‡æ›é™¤éŒ¯æ¨¡å¼</button>
            <button id="export-save-btn" class="control-btn">åŒ¯å‡ºå­˜æª”</button>
            <button id="import-save-btn" class="control-btn">åŒ¯å…¥å­˜æª”</button>
            <button id="export-config-btn" class="control-btn">åŒ¯å‡ºè¨­å®š</button>
            <button id="reset-stats-btn" class="control-btn">é‡ç½®çµ±è¨ˆ</button>
        </div>
        <div class="control-stats">
            <h4>éŠæˆ²çµ±è¨ˆ</h4>
            <div id="game-stats"></div>
        </div>
    </div>

    <!-- éŠæˆ²èªªæ˜æ¨¡æ…‹æ¡† -->
    <div id="help-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>éŠæˆ²èªªæ˜</h3>
                <button id="close-help-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h4>ğŸ¯ éŠæˆ²ç›®æ¨™</h4>
                    <p>æ“Šæ•—å¾é»‘æš—é­”çªŸä¸­æ¹§ç¾çš„æ•µäººï¼Œæå‡ä½ çš„èƒ½åŠ›ï¼Œæœ€çµ‚é¢å°æœ€çµ‚çš„æŒ‘æˆ°ã€‚</p>
                </div>
                
                <div class="help-section">
                    <h4>âš”ï¸ æˆ°é¬¥ç³»çµ±</h4>
                    <ul>
                        <li><strong>è¼•æ”»æ“Š</strong>: 16å‚·å®³ï¼Œ72%å‘½ä¸­ç‡</li>
                        <li><strong>ä¸­æ”»æ“Š</strong>: 24å‚·å®³ï¼Œ64%å‘½ä¸­ç‡ï¼Œ5%æš´æ“Šç‡</li>
                        <li><strong>é‡æ”»æ“Š</strong>: 49å‚·å®³ï¼Œ57%å‘½ä¸­ç‡ï¼Œ10%æš´æ“Šç‡</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h4>ğŸ“ˆ æˆé•·ç³»çµ±</h4>
                    <ul>
                        <li>æ“Šæ•—æ•µäººç²å¾—çå‹µé¸æ“‡</li>
                        <li>æ¯æ“Šæ•—3å€‹æ•µäººç²å¾—1å€‹å¤©è³¦é»</li>
                        <li>æ¿€æ´»å¤©è³¦ç²å¾—æ°¸ä¹…èƒ½åŠ›æå‡</li>
                        <li>æ•µäººæœƒéš¨è‘—ç­‰ç´šæå‡è€Œè®Šå¼·</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h4>ğŸ® æ“ä½œæ–¹å¼</h4>
                    <ul>
                        <li><strong>1/2/3</strong>: ä½¿ç”¨è¼•/ä¸­/é‡æ”»æ“Š</li>
                        <li><strong>Enter</strong>: é–‹å§‹æˆ°é¬¥</li>
                        <li><strong>Escape</strong>: æ‰“é–‹éŠæˆ²é¸å–®</li>
                        <li><strong>Ctrl+S</strong>: å¿«é€Ÿå­˜æª”</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h4>ğŸ’¡ éŠæˆ²æç¤º</h4>
                    <ul>
                        <li>æ³¨æ„æ•µäººä¸‹æ¬¡æ”»æ“Šçš„é å‘Š</li>
                        <li>åˆç†é¸æ“‡çå‹µä¾†å»ºæ§‹ä½ çš„æˆ°é¬¥é¢¨æ ¼</li>
                        <li>å¤©è³¦ç³»çµ±æä¾›å¼·å¤§çš„è¢«å‹•èƒ½åŠ›</li>
                        <li>è¨˜å¾—å®šæœŸä¿å­˜éŠæˆ²é€²åº¦</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button id="start-tutorial-btn" class="action-btn">é–‹å§‹æ•™å­¸</button>
            </div>
        </div>
    </div>

    <!-- éŠæˆ²å­˜æª”æ¨¡æ…‹æ¡† -->
    <div id="save-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>éŠæˆ²å­˜æª”</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div id="save-slots"></div>
            </div>
            <div class="modal-footer">
                <button id="export-all-saves-btn" class="secondary-btn">åŒ¯å‡ºæ‰€æœ‰å­˜æª”</button>
                <button id="import-save-file-btn" class="secondary-btn">åŒ¯å…¥å­˜æª”æ–‡ä»¶</button>
            </div>
        </div>
    </div>

    <!-- éŠæˆ²è¨­å®šæ¨¡æ…‹æ¡† -->
    <div id="settings-modal" class="settings-modal" style="display: none;">
        <div class="settings-content">
            <div class="settings-header">
                <h2>éŠæˆ²è¨­å®š</h2>
                <button id="close-settings-btn" class="close-btn">&times;</button>
            </div>
            
            <div class="settings-tabs">
                <button class="settings-tab active" data-tab="graphics">ç•«é¢</button>
                <button class="settings-tab" data-tab="audio">éŸ³æ•ˆ</button>
                <button class="settings-tab" data-tab="gameplay">éŠæˆ²</button>
                <button class="settings-tab" data-tab="controls">æ§åˆ¶</button>
                <button class="settings-tab" data-tab="interface">ç•Œé¢</button>
            </div>
            
            <div class="settings-panels">
                <div class="settings-panel active" id="graphics-panel">
                    <div class="setting-group">
                        <h3>ç•«é¢å“è³ª</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>ç•«è³ªè¨­å®š</h4>
                                <p>èª¿æ•´éŠæˆ²ç•«é¢å“è³ª</p>
                            </div>
                            <div class="setting-control">
                                <select id="graphics-quality">
                                    <option value="low">ä½</option>
                                    <option value="medium" selected>ä¸­</option>
                                    <option value="high">é«˜</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>è¦–è¦ºæ•ˆæœ</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>å‹•ç•«æ•ˆæœ</h4>
                                <p>å•Ÿç”¨/ç¦ç”¨æˆ°é¬¥å‹•ç•«</p>
                            </div>
                            <div class="setting-control">
                                <label class="switch">
                                    <input type="checkbox" id="animations-enabled" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-panel" id="audio-panel">
                    <div class="setting-group">
                        <h3>éŸ³é‡æ§åˆ¶</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>ä¸»éŸ³é‡</h4>
                                <p>èª¿æ•´æ•´é«”éŸ³é‡å¤§å°</p>
                            </div>
                            <div class="setting-control">
                                <input type="range" id="master-volume" min="0" max="100" value="80">
                                <span class="slider-value">80%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-panel" id="gameplay-panel">
                    <div class="setting-group">
                        <h3>éŠæˆ²é›£åº¦</h3>
                        <div class="setting-item">
                            <div class="setting-label">
                                <h4>é›£åº¦ç­‰ç´š</h4>
                                <p>é¸æ“‡éŠæˆ²é›£åº¦</p>
                            </div>
                            <div class="setting-control">
                                <select id="difficulty-level">
                                    <option value="easy">ç°¡å–®</option>
                                    <option value="normal" selected>æ™®é€š</option>
                                    <option value="hard">å›°é›£</option>
                                    <option value="nightmare">å™©å¤¢</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="settings-footer">
                <button id="reset-settings-btn" class="secondary-btn">æ¢å¾©é è¨­</button>
                <button id="apply-settings-btn" class="action-btn">å¥—ç”¨è¨­å®š</button>
            </div>
        </div>
    </div>

    <!-- é€šçŸ¥å€åŸŸ -->
    <div id="notification-area"></div>

    <!-- ç‰ˆæœ¬æ¨™è­˜ -->
    <div class="version-badge">v1.4.0</div>

    <!-- JavaScript æ–‡ä»¶ -->
<script src="./js/config/constants.js"></script>
<script src="./js/core/Entity.js"></script>
<script src="./js/core/BattleSystem.js"></script>
<script src="./js/core/EnemyAI.js"></script>
<script src="./js/core/EnemySystem.js"></script>
<script src="./js/core/RewardSystem.js"></script>
<script src="./js/core/TalentSystem.js"></script>
<script src="./js/core/SaveManager.js"></script>
<script src="./js/core/ConfigManager.js"></script>
<script src="./js/core/GameManager.js"></script>
<script src="./js/main.js"></script>

    <!-- éŠæˆ²åˆå§‹åŒ–è…³æœ¬ -->
    <script>
        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–éŠæˆ²
        window.addEventListener('load', function() {
            // éš±è—è¼‰å…¥ç•«é¢
            const loadingScreen = document.getElementById('loading-screen');
            const gameContainer = document.getElementById('game-container');
            
            // æ¨¡æ“¬è¼‰å…¥æ™‚é–“
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    gameContainer.style.display = 'grid';
                    
                    // é¡¯ç¤ºæ­¡è¿è¨Šæ¯
                    if (window.game && window.game.addCombatMessage) {
                        window.game.addCombatMessage('æ­¡è¿ä¾†åˆ°é»‘æš—é­”çªŸï¼');
                        window.game.addCombatMessage('é»æ“Šã€Œé–‹å§‹æˆ°é¬¥ã€é–‹å§‹ä½ çš„å†’éšª');
                    }
                }, 500);
            }, 1500);
            
            // æ·»åŠ éµç›¤å¿«æ·éµ
            document.addEventListener('keydown', function(e) {
                // éŠæˆ²æ§åˆ¶å¿«æ·éµ
                if (e.key === 'Escape') {
                    const settingsModal = document.getElementById('settings-modal');
                    if (settingsModal.style.display === 'block') {
                        settingsModal.style.display = 'none';
                    } else {
                        const controls = document.getElementById('game-controls');
                        controls.style.display = controls.style.display === 'none' ? 'block' : 'none';
                    }
                    e.preventDefault();
                }
                
                // å¡ç‰Œå¿«æ·éµ
                if (e.key === '1' || e.key === '2' || e.key === '3') {
                    const cards = document.querySelectorAll('.card');
                    const index = parseInt(e.key) - 1;
                    if (cards[index] && !cards[index].classList.contains('disabled')) {
                        cards[index].click();
                    }
                }
                
                // é–‹å§‹æˆ°é¬¥å¿«æ·éµ
                if (e.key === 'Enter' || e.key === ' ') {
                    const startBtn = document.getElementById('start-battle-btn');
                    if (startBtn && !startBtn.disabled) {
                        startBtn.click();
                    }
                }
                
                // å¿«é€Ÿå­˜æª”
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    const saveBtn = document.getElementById('save-game-btn');
                    if (saveBtn) saveBtn.click();
                }
                
                // å¿«é€Ÿè¼‰å…¥
                if (e.ctrlKey && e.key === 'l') {
                    e.preventDefault();
                    const loadBtn = document.getElementById('load-game-btn');
                    if (loadBtn) loadBtn.click();
                }
            });
            
            // è¨­å®šæŒ‰éˆ•äº‹ä»¶
            document.getElementById('settings-btn')?.addEventListener('click', function() {
                const modal = document.getElementById('settings-modal');
                modal.style.display = 'flex';
            });
            
            document.getElementById('close-settings-btn')?.addEventListener('click', function() {
                const modal = document.getElementById('settings-modal');
                modal.style.display = 'none';
            });
            
            // èªªæ˜æŒ‰éˆ•äº‹ä»¶
            document.getElementById('help-btn')?.addEventListener('click', function() {
                const modal = document.getElementById('help-modal');
                modal.style.display = 'block';
            });
            
            document.getElementById('close-help-btn')?.addEventListener('click', function() {
                const modal = document.getElementById('help-modal');
                modal.style.display = 'none';
            });
            
            // è¨­å®šæ¨™ç±¤åˆ‡æ›
            document.querySelectorAll('.settings-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    // åˆ‡æ›æ¨™ç±¤é‚è¼¯
                });
            });
            
            // æ·»åŠ è§¸æ‘¸è¨­å‚™æ”¯æŒ
            if ('ontouchstart' in window) {
                document.body.classList.add('touch-device');
                // æ·»åŠ è§¸æ‘¸è¨­å‚™ç‰¹å®šçš„æ¨£å¼
                const style = document.createElement('style');
                style.textContent = `
                    .touch-device .card {
                        min-height: 120px;
                    }
                    .touch-device .action-btn {
                        padding: 15px 25px;
                    }
                `;
                document.head.appendChild(style);
            }
        });
        
        // éŒ¯èª¤è™•ç†
        window.addEventListener('error', function(e) {
            console.error('éŠæˆ²éŒ¯èª¤:', e.error);
            // é¡¯ç¤ºç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤è¨Šæ¯
            const notification = document.createElement('div');
            notification.className = 'notification error';
            notification.innerHTML = `
                <strong>ç™¼ç”ŸéŒ¯èª¤</strong>
                <p>è«‹åˆ·æ–°é é¢é‡è©¦</p>
            `;
            document.getElementById('notification-area').appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        });
        
        // é›¢ç·šæª¢æ¸¬
        window.addEventListener('offline', function() {
            if (window.game && window.game.addCombatMessage) {
                window.game.addCombatMessage('âš ï¸ ç¶²è·¯é€£æ¥å·²æ–·é–‹ï¼ŒéŠæˆ²å°‡åœ¨æœ¬åœ°é‹è¡Œ');
            }
        });
        
        window.addEventListener('online', function() {
            if (window.game && window.game.addCombatMessage) {
                window.game.addCombatMessage('âœ… ç¶²è·¯é€£æ¥å·²æ¢å¾©');
            }
        });
        
        // é é¢å¯è¦‹æ€§è®ŠåŒ–
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                console.log('éŠæˆ²åˆ‡æ›åˆ°å¾Œå°');
                // è‡ªå‹•ä¿å­˜éŠæˆ²
                if (window.game?.saveGame) {
                    window.game.saveGame();
                }
            }
        });
    </script>

    <!-- éŠæˆ²çµ±è¨ˆä»£ç¢¼ -->
    <script>
        // åŸºæœ¬çš„éŠæˆ²çµ±è¨ˆ
        window.gameAnalytics = {
            startTime: Date.now(),
            playSession: function() {
                return {
                    playTime: Math.floor((Date.now() - this.startTime) / 1000),
                    enemiesDefeated: window.performanceMonitor ? window.performanceMonitor.stats.enemiesDefeated : 0,
                    totalDamage: window.performanceMonitor ? window.performanceMonitor.stats.totalDamage : 0
                };
            },
            
            trackEvent: function(eventName, data) {
                console.log('éŠæˆ²äº‹ä»¶:', eventName, data);
                // é€™è£¡å¯ä»¥æ·»åŠ æ›´å¤šçµ±è¨ˆé‚è¼¯
            }
        };
        
        // è¿½è¹¤éŠæˆ²äº‹ä»¶
        ['battleStart', 'battleVictory', 'battleDefeat', 'talentActivated', 'rewardObtained'].forEach(eventName => {
            document.addEventListener(eventName, function(e) {
                window.gameAnalytics.trackEvent(eventName, e.detail);
            });
        });
    </script>

    <!-- PWA æ”¯æŒ -->
    <script>
        // è¨»å†ŠService Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker è¨»å†ŠæˆåŠŸ:', registration);
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker è¨»å†Šå¤±æ•—:', error);
                    });
            });
        }
        
        // æ·»åŠ åˆ°ä¸»å±å¹•æç¤º
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // å¯ä»¥é¡¯ç¤ºå®‰è£æŒ‰éˆ•
            const installBtn = document.createElement('button');
            installBtn.textContent = 'å®‰è£æ‡‰ç”¨';
            installBtn.className = 'action-btn';
            installBtn.style.position = 'fixed';
            installBtn.style.bottom = '20px';
            installBtn.style.left = '50%';
            installBtn.style.transform = 'translateX(-50%)';
            installBtn.style.zIndex = '1000';
            
            installBtn.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log('å®‰è£çµæœ:', outcome);
                    deferredPrompt = null;
                    installBtn.remove();
                }
            });
            
            document.body.appendChild(installBtn);
        });
    </script>
</body>
</html>